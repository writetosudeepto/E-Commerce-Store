(this.webpackJsonpprojfrontend=this.webpackJsonpprojfrontend||[]).push([[0],{19:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var n=c(1),o=c(16),s=c.n(o),a=(c(19),c(5)),r=c(3),l=c(2),i=c(26),d=c(23),j="http://127.0.0.1:8000/api/",u=function(e){if(void 0!==typeof window){localStorage.removeItem("cart");localStorage.setItem("cart",JSON.stringify([])),e()}},b=function(){return void 0!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},m=function(e){console.log(b().user);var t=b()&&b().user.id;if(void 0!==typeof window)return localStorage.removeItem("jwt"),u((function(){})),fetch("".concat(j,"user/logout/").concat(t,"/"),{method:"GET"}).then((function(t){console.log("Signout success"),e()})).catch((function(e){return console.log(e)}))},h=c(0),O=function(e){var t=e.component,c=Object(i.a)(e,["component"]);return Object(h.jsx)(r.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return b()?Object(h.jsx)(t,Object(l.a)({},e)):Object(h.jsx)(r.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},f=c(6),g=function(e,t){return e.location.pathname===t?{color:"#2ecc72"}:{color:"#FFFFFF"}},x=Object(r.g)((function(e){var t=e.history;e.path;return Object(h.jsx)("div",{children:Object(h.jsxs)("ul",{className:"nav nav-tabs bg-dark",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(a.b,{style:g(t,"/"),className:"nav-link",to:"/",children:"Home"})}),b()&&Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(a.b,{style:g(t,"/user/dashboard"),className:"nav-link",to:"/user/dashboard",children:"Dashboard"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(a.b,{style:g(t,"/cart"),className:"nav-link",to:"/cart",children:"Cart"})})]}),!b()&&Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(a.b,{style:g(t,"/signup"),className:"nav-link",to:"/signup",children:"SignUp"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(a.b,{style:g(t,"/signin"),className:"nav-link",to:"/signin",children:"Signin"})})]}),b()&&Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("span",{onClick:function(){m((function(){t.push("/")}))},className:"nav-link text-warning",children:"Signout"})})]})})})),p=function(e){var t=e.title,c=void 0===t?"My Title":t,n=e.description,o=void 0===n?"My Description":n,s=(e.className,e.children);return Object(h.jsxs)("div",{children:[Object(h.jsx)(x,{}),Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsxs)("div",{className:"jumbotron bg-dark text-white text-center",children:[Object(h.jsx)("h2",{className:"display-4",children:c}),Object(h.jsx)("p",{className:"lead",children:o})]}),Object(h.jsx)("div",{className:"className",children:s})]}),Object(h.jsx)("footer",{className:"footer bg-dark mt-auto py-3",children:Object(h.jsxs)("div",{className:"container-fluid bg-success text-white text-center py-3",children:[Object(h.jsx)("h4",{children:"If you got any questions reach me out at instagram. "}),Object(h.jsx)("button",{className:"btn btn-warning btn-lg",children:"Contact Us"}),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("span",{className:"text-warning",children:"An amazing Django React Fullstack Course"})})]})})]})},v=function(e){var t=e.product,c=t?t.image:"https://images.pexels.com/photos/326501/pexels-photo-326501.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940";return Object(h.jsx)("div",{className:"rounded border border-success p-2",children:Object(h.jsx)("img",{src:c,style:{maxHeight:"100%",maxWidth:"100%"},className:"mb-3 rounded",alt:""})})},N=function(e){var t=e.product,c=e.addtoCart,o=void 0===c||c,s=e.removefromCart,a=void 0!==s&&s,i=e.reload,d=void 0===i?void 0:i,j=e.setReload,u=void 0===j?function(e){return e}:j,m=t?t.name:"A photo from pexels",O=t?t.description:"Default description",g=t?t.price:"Default",x=Object(n.useState)(!1),p=Object(f.a)(x,2),N=p[0],w=p[1],y=function(){b()?(!function(e,t){var c=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.push(Object(l.a)({},e)),localStorage.setItem("cart",JSON.stringify(c)),t())}(t,(function(){return w(!0)})),console.log("Added to cart")):console.log("Login Please!")};return Object(h.jsxs)("div",{className:"card text-white bg-dark border border-info ",children:[Object(h.jsx)("div",{className:"card-header lead",children:m}),Object(h.jsxs)("div",{className:"card-body",children:[function(e){if(e)return Object(h.jsx)(r.a,{to:"/cart"})}(N),Object(h.jsx)(v,{product:t}),Object(h.jsx)("p",{className:"lead bg-success font-weight-normal text-wrap",children:O}),Object(h.jsxs)("p",{className:"btn btn-success rounded  btn-sm px-4",children:["$ ",g]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-12",children:function(e){return e&&Object(h.jsx)("button",{onClick:function(){y(),u(!d)},className:"btn btn-block btn-outline-success mt-2 mb-2",children:"Add to Cart"})}(o)}),Object(h.jsx)("div",{className:"col-12",children:function(e){return e&&Object(h.jsx)("button",{onClick:function(){!function(e){var t=[];console.log(e),void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart")),console.log(t)),t.map((function(c,n){c._id===e&&(console.log("hey"),t.splice(n,1))})),localStorage.setItem("cart",JSON.stringify(t)))}(t._id),u(!d),console.log("Product removed from cart")},className:"btn btn-block btn-outline-danger mt-2 mb-2",children:"Remove from cart"})}(a)})]})]})]})},w=c(25),y=c.n(w),S=function(e){var t=e.products,c=e.reload,o=void 0===c?void 0:c,s=e.setReload,a=void 0===s?function(e){return e}:s,i=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{}}),d=Object(f.a)(i,2),O=d[0],g=d[1],x=b&&b().user.id,p=b&&b().token,v=function(e,t){(function(e,t){return fetch("".concat(j,"payment/gettoken/").concat(e,"/").concat(t,"/"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){if(e.error)g(Object(l.a)(Object(l.a)({},e),{},{error:e.error})),m((function(){return Object(h.jsx)(r.a,{to:"/"})}));else{var t=e.clientToken;console.log(t),g({clientToken:t}),console.log(e.clientToken)}})).catch((function(e){return console.log(e)}))};Object(n.useEffect)((function(){v(x,p)}),[]);var N=function(){var e=0;return t.map((function(t){e+=parseFloat(t.price)})),e},w=function(){g({loading:!0});O.instance.requestPaymentMethod().then((function(e){console.log("MYDATA",e);var c={paymentMethodNonce:e.nonce,amount:N()};(function(e,t,c){var n=new FormData;for(var o in c)n.append(o,c[o]);return fetch("".concat(j,"payment/process/").concat(e,"/").concat(t,"/"),{method:"POST",body:n}).then((function(e){return console.log("p-0",e),e.json()})).catch((function(e){return console.log(e)}))})(x,p,c).then((function(e){if(console.log("POINT-1",e),e.error)"1"==e.code&&(console.log("PAYMENT FAILED"),m((function(){return Object(h.jsx)(r.a,{to:"/"})})));else{g(Object(l.a)(Object(l.a)({},O),{},{success:e.success,loading:!1})),console.log("PAYMENT SUCCESS");var c="";t.forEach((function(e){c+=e.name+", "})),console.log(c);var n={products:c,transaction_id:e.transaction.id,amount:e.transaction.amount};console.log(x,p,n),function(e,t,c){var n=new FormData;for(var o in c)n.append(o,c[o]);return fetch("".concat(j,"order/add/").concat(e,"/").concat(t,"/"),{method:"POST",body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(x,p,n).then((function(e){e.error?("1"==e.code&&console.log("ORDER FAILED"),m((function(){return Object(h.jsx)(r.a,{to:"/"})}))):1==e.success&&console.log("ORDER PLACED")})).catch((function(e){g({loading:!1,success:!1}),console.log("ORDER FAILED",e)})),u((function(){return console.log("DID WE GET A CRASH?")})),a(!o)}})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log("NONCE",e)}))};return Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{children:["Your bill is $ ",N()]}),Object(h.jsx)("div",{children:null!==O.clientToken&&t.length>0?Object(h.jsxs)("div",{children:[Object(h.jsx)(y.a,{options:{authorization:O.clientToken},onInstance:function(e){return O.instance=e}}),Object(h.jsx)("button",{onClick:w,className:"btn btn-block btn-success",children:"Buy Now"})]}):Object(h.jsx)("h3",{children:"Please login first or add something in cart"})})]})},k=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),c=t[0],o=t[1],s=Object(n.useState)([]),a=Object(f.a)(s,2),r=a[0],l=a[1];Object(n.useEffect)((function(){l(function(){if(void 0!==typeof window&&localStorage.getItem("cart"))return JSON.parse(localStorage.getItem("cart"))}())}),[c]);return Object(h.jsx)(p,{title:"Cart page",description:"Welcome to checkout",children:Object(h.jsxs)("div",{className:"row text-center",children:[Object(h.jsx)("div",{className:"col-6",children:function(e){return e.length>0?Object(h.jsx)("div",{children:Object(h.jsx)("div",{children:e.map((function(e,t){return Object(h.jsx)(N,{product:e,removefromCart:!0,addtoCart:!1,reload:c,setReload:o},t)}))})}):Object(h.jsx)("h1",{children:"No Product"})}(r)}),Object(h.jsxs)("div",{className:"col-6",children:[r.length>0?Object(h.jsx)(S,{products:r,setReload:o}):Object(h.jsx)("h3",{children:"Please login or add something to your cart"}),console.log(r)]})]})})};function C(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),c=t[0],o=t[1],s=Object(n.useState)(!1),a=Object(f.a)(s,2),r=a[0],l=a[1],i=function(){return fetch("".concat(j,"product/"),{method:"GET"}).then((function(e){return console.log("hello"),e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?(l(e.error),console.log(r)):o(e)}))};return Object(n.useEffect)((function(){i()}),[]),Object(h.jsxs)(p,{title:"Home Page",description:"Welcome to Tshirt storez",children:[Object(h.jsx)("h1",{children:"Home component"}),Object(h.jsx)("div",{className:"row",children:c.map((function(e,t){return Object(h.jsx)("div",{className:"col-4 mb-4",children:Object(h.jsx)(N,{product:e})},t)}))})]})}var E=c(12),D=function(){var e=Object(n.useState)({name:"",email:"writetosudeepto@gmail.com",password:"12345",error:"",success:!1,loading:!1,didRedirect:!1}),t=Object(f.a)(e,2),c=t[0],o=t[1],s=(c.name,c.email),a=c.password,i=(c.error,c.success,c.loading),u=(c.didRedirect,function(e){return function(t){o(Object(l.a)(Object(l.a)({},c),{},Object(E.a)({error:!1},e,t.target.value)))}}),m=function(e){e.preventDefault(),o(Object(l.a)(Object(l.a)({},c),{},{error:!1,loading:!0})),function(e){var t=new FormData;for(var c in e)t.append(c,e[c]);var n,o=Object(d.a)(t.keys());try{for(o.s();!(n=o.n()).done;){var s=n.value;console.log("MYKEY: ",s)}}catch(a){o.e(a)}finally{o.f()}return fetch("".concat(j,"user/login/"),{method:"POST",body:t}).then((function(e){return console.log("SUCCESS",e),e.json()})).catch((function(e){return console.log(e)}))}({email:s,password:a}).then((function(e){console.log("DATA",e),e.token?function(e,t){void 0!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){console.log("TOKEN ADDED"),o(Object(l.a)(Object(l.a)({},c),{},{didRedirect:!0}))})):o(Object(l.a)(Object(l.a)({},c),{},{loading:!1}))})).catch((function(e){return console.log(e)}))};return Object(h.jsxs)(p,{title:"welcome to signin page",description:"A Tshirt store",children:[i&&Object(h.jsx)("div",{className:"alert alert-info",children:Object(h.jsx)("h2",{children:"Loading.."})}),Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-light",children:"Email"}),Object(h.jsx)("input",{type:"email",value:s,onChange:u("email"),className:"form-control"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-light",children:"Password"}),Object(h.jsx)("input",{type:"password",value:a,onChange:u("password"),className:"form-control"})]}),Object(h.jsx)("button",{onClick:m,className:"btn btn-success btn-block",children:"Submit"})]})})}),Object(h.jsx)("p",{className:"text-center",children:JSON.stringify(c)}),b()?Object(h.jsx)(r.a,{to:"/"}):null]})},T=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(f.a)(e,2),c=t[0],o=t[1],s=c.name,r=c.email,i=c.password,d=c.error,u=c.success,b=function(e){return function(t){o(Object(l.a)(Object(l.a)({},c),{},Object(E.a)({error:!1},e,t.target.value)))}},m=function(e){var t;e.preventDefault(),o(Object(l.a)(Object(l.a)({},c),{},{error:!1})),(t={name:s,email:r,password:i},fetch("".concat(j,"user/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){console.log("DATA",e),e.email===r?o(Object(l.a)(Object(l.a)({},c),{},{name:"",email:"",password:"",error:"",success:!0})):o(Object(l.a)(Object(l.a)({},c),{},{error:!0,success:!1}))})).catch((function(e){return console.log(e)}))};return Object(h.jsxs)(p,{title:"Sign Up Page",description:"A signup for LCO user",children:[Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(h.jsxs)("div",{className:"alert alert-success",style:{display:u?"":"none"},children:["New account created successfully, please"," ",Object(h.jsx)(a.b,{to:"/signin",children:"login"})," now."]})})}),Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(h.jsx)("div",{className:"alert alert-danger",style:{display:d?"":"none"},children:"Check all fields again."})})}),Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-light",children:"Name"}),Object(h.jsx)("input",{type:"text",value:s,onChange:b("name"),className:"form-control"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-light",children:"Email"}),Object(h.jsx)("input",{type:"email",value:r,onChange:b("email"),className:"form-control"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-light",children:"Password"}),Object(h.jsx)("input",{type:"password",value:i,onChange:b("password"),className:"form-control"})]}),Object(h.jsx)("button",{onClick:m,className:"btn btn-success btn-block",children:"Submit"})]})})}),Object(h.jsx)("p",{className:"text-white text-center",children:JSON.stringify(c)})]})},A=function(){return Object(h.jsx)(p,{title:"User Dashboard",children:Object(h.jsx)("h1",{children:"Welcome to user dashboard page"})})},I=function(){return Object(h.jsx)(a.a,{children:Object(h.jsxs)(r.d,{children:[Object(h.jsx)(r.b,{path:"/",exact:!0,component:C}),Object(h.jsx)(r.b,{path:"/signup",exact:!0,component:T}),Object(h.jsx)(r.b,{path:"/signin",exact:!0,component:D}),Object(h.jsx)(r.b,{path:"/cart",exact:!0,component:k}),Object(h.jsx)(O,{path:"/user/dashboard",exact:!0,component:A})]})})};s.a.render(Object(h.jsx)(I,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.aeb6f067.chunk.js.map